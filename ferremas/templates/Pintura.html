{% extends 'base.html' %}

{% block body %}
{% load static %}
<h1>Nuestras Pinturas y Esmaltes</h1>

<!-- Tarjeta de producto 1 -->
<div class="product-card">
    <h2 class="product-title">Esmalte al agua</h2>
    <img src="https://http2.mlstatic.com/D_NQ_NP_613308-MLA74406138908_022024-O.webp" alt="Imagen del Producto 1" style="width: 200px; height: auto;">
    <p class="product-description">Descripción del producto 1</p>
    <p class="product-price">Precio: $7.990</p>
    <form action="{% url 'agregar_al_carrito' %}" method="post" class="d-inline">
        {% csrf_token %}
        <input type="hidden" name="producto_id" value="{{ producto.id_producto }}">
            <button type="submit" class="btn btn-secondary">Añadir al carrito</button>
    </form>
</div>




<!-- Tarjeta de producto 2 -->
<div class="product-card">
    <h2 class="product-title">Pintura cafe</h2>
    <img src="https://www.ferreteriacerda.cl/autoadministracion/bodegatec/catalogo/fotos_chicas/208-1.jpeg" alt="Imagen del Producto 2" style="width: 200px; height: auto;">
    <p class="product-description">Descripción del producto 2</p>
    <p class="product-price">Precio: $7.990</p>
    <form action="{% url 'agregar_al_carrito' %}" method="post" class="d-inline">
        {% csrf_token %}
        <input type="hidden" name="producto_id" value="{{ producto.id }}">
        <button type="submit" class="btn btn-secondary">Añadir al carrito</button>
    </form>
    <!-- Agrega más detalles según sea necesario -->
</div>

<!-- Tarjeta de producto 3 -->
<div class="product-card">
    <h2 class="product-title">Pintura verde</h2>
    <img src="https://ferreteriaferromaq.cl/wp-content/uploads/2021/04/rrss-2-2.png" alt="Imagen del Producto 3" style="width: 200px; height: auto;">
    <p class="product-description">Descripción del producto 3</p>
    <p class="product-price">Precio: $7.990</p>
    <form method="post" class="product-form">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="button" class="add-to-cart" data-product-id="3">Agregar al carrito</button>
    </form>
    <!-- Agrega más detalles según sea necesario -->
</div>

<div class="container mt-5">
    {% if mensaje %}
    <div class="alert alert-warning" role="alert">
        {{ mensaje }}
    </div>
    {% endif %}
    <div class="row">
        {% for producto in Productos %}
        <div class="col-md-4">
            <div class="card mb-4">
                <img src="..." class="card-img-top" alt="{{ producto.nombre }}">
                <div class="card-body">
                    <h5 class="card-title">{{ producto.nombre }}</h5>
                    <p class="card-text">${{ producto.precio }}</p>
                    <p class="card-text">
                        <small class="text-muted">
                            {% if producto.cantidad > 0 %}
                                Cantidad en stock: {{ producto.cantidad }}
                            {% else %}
                                <span class="text-danger">Sin stock</span>
                            {% endif %}
                        </small>
                    </p>
                    <form action="{% url 'agregar_al_carrito' %}" method="post" class="d-inline">
                        {% csrf_token %}
                        <input type="hidden" name="producto_id" value="{{ producto.id }}">
                        {% if producto.cantidad > 0 %}
                            <button type="submit" class="btn btn-secondary">Añadir al carrito</button>
                        {% else %}
                            <button type="button" class="btn btn-secondary" disabled>Sin stock</button>
                        {% endif %}
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Agrega más tarjetas de productos según sea necesario -->

<script>
document.addEventListener('DOMContentLoaded', function() {
    var addToCartButtons = document.querySelectorAll('.add-to-cart');
    addToCartButtons.forEach(function(button) {
        button.addEventListener('click', function() {
            var productCard = button.closest('.product-card');
            var productId = button.getAttribute('data-product-id');
            var productTitle = productCard.querySelector('.product-title').innerText;
            var productDescription = productCard.querySelector('.product-description').innerText;
            var productPrice = productCard.querySelector('.product-price').innerText.replace('Precio: ', '');

            if (productId === '1') {
                // Mostrar en consola para producto 1
                console.log('Producto 1 agregado al carrito:');
                console.log('ID:', productId);
                console.log('Título:', productTitle);
                console.log('Descripción:', productDescription);
                console.log('Precio:', productPrice);
            } else if (productId === '2') {
                // Mostrar en consola para producto 2
                console.log('Producto 2 agregado al carrito:');
                console.log('ID:', productId);
                console.log('Título:', productTitle);
                console.log('Descripción:', productDescription);
                console.log('Precio:', productPrice);
            } else if (productId === '3') {
                // Mostrar en consola para producto 3
                console.log('Producto 3 agregado al carrito:');
                console.log('ID:', productId);
                console.log('Título:', productTitle);
                console.log('Descripción:', productDescription);
                console.log('Precio:', productPrice);
            }
        });
    });
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="{% static 'js/cart.js' %}"></script>

{% endblock %}
